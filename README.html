<html>
<body>

Чтобы добавить в свой проект на OCaml скрипты automake/autoconf, следует:<br>
<br>

<ol>
<li> Взять из репозитария template свежие файлы<br>
<br>
Makefile.am	- шаблон Makefile<br>
configure.in	- шаблон configure, определяет подстановки в Makefile<br>
acinclude.m4	- скрипт с недостающими макросами m4, будет включён в aclocal.m4<br>
autogen.sh	- скрипт запуска перегенерации<br>
<br>
<li> Поместить их в свой проект.<br>

<li> Адаптировать под свои нужды Makefile.am и configure.in, опираясь
на комментарии в файлах. А именно:<br>

<ul>
<li> заменить SOURCES;
<li> записать в TARGET желаемый результат сборки: только .cmi/.cmo или
   ещё .cma/.cmxa/.a и т.п.;
<li> рекомендуется использовать переменные $(CMI)/$(CMO)/$(CMXA) вместо явного
   указания файлов и расширений;
<li> если для линковки требуются дополнительные библиотеки, указать их в EXTRA_CMA;
   библиотеки, указанные для проверки в configure.in, будут добавлены автоматически;
<li> если проект собирает библиотку .cma не из всех имеющихся объектов .cmo,
   следует привести правильный список в переменной CMO4CMA;
<li> дополнительные флаги парсера указать в P4FLAGS;
<li> в секции all-am перечислить шаги сборки; можно просто удалить
   перечисленные в шаблоне ненужные;
<li> если проект собирает исполняемую программу, а не только модули/библиотеки,
   раскомменитровать секцию install-exec-am, раскомментировать удаление программы
   в секции uninstall-am;
<li> в секции META заполнить описание проекта (description) и зависимости
   (requires);
<li> в configure.in перечислить используемые модули парсера директивами
   AC_CHECK_CAMLP4_MODULE и модули компилятора директивами AC_CHECK_OCAML_MODULE;
<li> создать файл VERSION, содержащий строку $Revision: 0 $
<li> ocamldep и ocamldsort не понимают синтаксис парсера (revised), так что
   для проектов-парсеров придётся закомментировать их вызов в Makefile.am
   и configure.in соответственно
</ul>

<li> Запустить autogen.sh.

<li> Выполнить контрольную пересборку:

$ ./configure<br>
$ make<br>
$ make install<br>
$ make uninstall<br>
$ make clean<br>
$ make maintainer-clean<br>

<li> Проверить соответствие оставшихся и исходных файлов. Если есть лишние
или наоборот, отсутствующие, - разобраться и исправить.

<li> Включить автозамену ключевого слова Revision на текущую ревизию в файле VERSION:<br>

svn propset "svn:keywords" "Revision"  VERSION<br>

<li> Закоммитить проект в Subversion. При этом увеличится ревизия в файле
VERSION, так и задумано.

<li> Жить-поживать и добра наживать.

</ol>

</body>
</html>
